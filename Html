<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Wingo 30S Clone</title>
  <style>
    body {margin:0;padding:0;font-family:Arial,sans-serif;background:#121212;color:#fff;}
    .card {max-width:400px;margin:40px auto;padding:20px;background:#1e1e1e;border-radius:8px;box-shadow:0 4px 8px rgba(0,0,0,0.5);}
    h2 {margin:0 0 10px;color:#fbc531;text-align:center;}
    input, button, select {width:100%;padding:10px;margin:8px 0;border:none;border-radius:4px;font-size:16px;}
    button {background:#fbc531;color:#000;font-weight:bold;cursor:pointer;}
    .hidden {display:none;}
    .wallet {margin:12px 0;padding:12px;background:#222;border-radius:6px;text-align:center;}
    .bet-area {display:flex;justify-content:space-between;flex-wrap:wrap;margin:12px 0;}
    .bet-area button {width:30%;padding:12px;margin:4px;border-radius:6px;font-weight:bold;}
    .green {background:#44bd32;}
    .red {background:#e84118;}
    .violet {background:purple;}
    table {width:100%;border-collapse:collapse;margin-top:12px;}
    th, td {padding:8px;border-bottom:1px solid #333;text-align:center;}
    #nav {position:fixed;bottom:0;left:0;right:0;background:#1e1e1e;display:flex;justify-content:space-around;padding:10px;}
    #nav button {background:none;border:none;color:#fff;font-weight:bold;}
  </style>
</head>
<body>
  <div id="register" class="card">
    <h2>Register</h2>
    <input placeholder="Phone number" id="regPhone"/>
    <input type="password" placeholder="Password" id="regPass"/>
    <input type="password" placeholder="Confirm password" id="regCPass"/>
    <button onclick="doRegister()">Register</button>
    <p style="text-align:center;color:#aaa">Already registered? <a href="#" onclick="show('login')">Login</a></p>
  </div>

  <div id="login" class="card hidden">
    <h2>Login</h2>
    <input placeholder="Phone number" id="loginPhone"/>
    <input type="password" placeholder="Password" id="loginPass"/>
    <button onclick="doLogin()">Login</button>
    <p style="text-align:center;color:#aaa">Need account? <a href="#" onclick="show('register')">Register</a></p>
  </div>

  <div id="game" class="card hidden">
    <h2>Wallet: â‚¹<span id="bal">0</span></h2>
    <div class="wallet">
      <button onclick="deposit()">Deposit</button>
      <button onclick="withdraw()">Withdraw</button>
    </div>

    <h2>Wingo 30s</h2>
    <div style="text-align:center;font-size:16px;padding:8px">Period: <span id="period">---</span> | Time: <span id="timer">30</span>s</div>
    <div class="bet-area">
      <button class="green" onclick="placeBet('Green')">Green</button>
      <button class="violet" onclick="placeBet('Violet')">Violet</button>
      <button class="red" onclick="placeBet('Red')">Red</button>
      <button onclick="placeBetNum(0)">0</button>
      <button onclick="placeBetNum(1)">1</button>
      <button onclick="placeBetNum(2)">2</button>
      <button onclick="placeBetNum(3)">3</button>
      <button onclick="placeBetNum(4)">4</button>
      <button onclick="placeBetNum(5)">5</button>
      <button onclick="placeBetNum(6)">6</button>
      <button onclick="placeBetNum(7)">7</button>
      <button onclick="placeBetNum(8)">8</button>
      <button onclick="placeBetNum(9)">9</button>
    </div>

    <table>
      <thead><tr><th>Period</th><th>Num</th><th>Size</th><th>Color</th></tr></thead>
      <tbody id="history"></tbody>
    </table>
  </div>

  <div id="nav" class="hidden">
    <button onclick="show('game')">Home</button>
    <button onclick="alert('History at bottom')">History</button>
    <button onclick="logout()">Logout</button>
  </div>

  <script>
    let users=JSON.parse(localStorage.getItem('users')||'{}'),
        cur=localStorage.getItem('cur'),
        bal=+localStorage.getItem('bal')||0,
        hist=JSON.parse(localStorage.getItem('hist')||'[]'),
        period=0, timerInt;

    function show(page){
      ['register','login','game'].forEach(p=>document.getElementById(p).classList.add('hidden'));
      document.getElementById(page).classList.remove('hidden');
      document.getElementById('nav').style.display=page==='game'?'flex':'none';
    }

    function doRegister(){
      let p=document.getElementById('regPhone').value,
          a=document.getElementById('regPass').value,
          b=document.getElementById('regCPass').value;
      if(!p||!a||a!==b) return alert('Invalid or mismatch');
      if(users[p]) return alert('Already exists');
      users[p]=a;localStorage.setItem('users',JSON.stringify(users));
      alert('Registered');show('login');
    }

    function doLogin(){
      let p=document.getElementById('loginPhone').value,a=document.getElementById('loginPass').value;
      if(!(users[p]&&users[p]===a)) return alert('Invalid');
      localStorage.setItem('cur',p);
      cur=p;bal=+localStorage.getItem('bal')||0;
      showGame();
    }

    function logout(){
      localStorage.removeItem('cur');
      cur=null;
      show('login');
    }

    function showGame(){
      show('game');
      document.getElementById('bal').innerText=bal;
      loadHist();
      startGame();
    }

    function deposit(){
      let x=+prompt('Deposit amount');
      if(x>0){bal+=x;localStorage.setItem('bal',bal);document.getElementById('bal').innerText=bal;}
    }

    function withdraw(){
      let x=+prompt('Withdraw amount');
      if(x>0 && x<=bal){bal-=x;localStorage.setItem('bal',bal);document.getElementById('bal').innerText=bal;}
      else alert('Invalid');
    }

    function startGame(){
      clearInterval(timerInt);
      period=Date.now();
      document.getElementById('period').innerText=period;
      let t=30;
      document.getElementById('timer').innerText=t;
      timerInt=setInterval(()=>{
        t--;document.getElementById('timer').innerText=t;
        if(t<=0){clearInterval(timerInt); generateResult();}
      },1000);
    }

    function placeBet(type){
      let a=+prompt('Bet amount on '+type+':');
      if(a>bal){return alert('Insufficient');}
      bal-=a;localStorage.setItem('bal',bal);
      document.getElementById('bal').innerText=bal;
      hist.unshift({period, number:'-', color:type, size:'-'});
      localStorage.setItem('hist',JSON.stringify(hist));
      loadHist();
    }

    function placeBetNum(n){
      let a=+prompt('Bet amount on '+n+':');
      if(a>bal){return alert('Insufficient');}
      bal-=a;localStorage.setItem('bal',bal);
      let color = n>=0 && n%2? 'Red': 'Green';
      let size = n>=5? 'Big': 'Small';
      hist.unshift({period, number:n, color, size});
      localStorage.setItem('hist',JSON.stringify(hist));
      loadHist();
    }

    function generateResult(){
      let n=Math.floor(Math.random()*10);
      let color=n%2? 'Red':'Green';
      let size=n>=5? 'Big':'Small';
      hist.unshift({period, number:n, color, size});
      localStorage.setItem('hist',JSON.stringify(hist));
      loadHist();
      setTimeout(startGame,5000);
    }

    function loadHist(){
      let html='';
      hist.slice(0,10).forEach(it=>html+=`<tr><td>${it.period}</td><td>${it.number}</td><td>${it.size}</td><td>${it.color}</td></tr>`);
      document.getElementById('history').innerHTML=html;
    }

    if(cur) showGame(); else show('register');
  </script>
</body>
</html>
