<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>YGWIN</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      background: #0e0e0e;
      color: #fff;
    }
    .container { padding: 20px; }
    .screen { display: none; }
    .active { display: block; }

    input, button {
      padding: 10px;
      font-size: 16px;
      margin: 8px 0;
      border-radius: 6px;
      width: 100%;
    }

    .button-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 10px;
      margin-top: 10px;
    }

    .btn {
      background: #222;
      border: 1px solid #444;
      cursor: pointer;
      color: white;
    }

    .colors, .sizes {
      display: flex;
      justify-content: space-around;
      margin: 10px 0;
    }

    .popup {
      position: fixed;
      top: 30%;
      left: 10%;
      right: 10%;
      background: #1c1c1c;
      padding: 20px;
      border-radius: 8px;
      display: none;
    }

    .popup input { width: 90%; }
    .popup .close { background: crimson; }
  </style>
</head>
<body>

<div class="container">

  <!-- Register Screen -->
  <div id="registerScreen" class="screen active">
    <h2>Register</h2>
    <input type="text" id="regPhone" placeholder="Phone Number" />
    <input type="password" id="regPass" placeholder="Password" />
    <input type="password" id="regConfirm" placeholder="Confirm Password" />
    <button onclick="register()">Register</button>
    <p>Already have account? <a href="#" onclick="showLogin()">Login</a></p>
  </div>

  <!-- Login Screen -->
  <div id="loginScreen" class="screen">
    <h2>Login</h2>
    <input type="text" id="loginPhone" placeholder="Phone Number" />
    <input type="password" id="loginPass" placeholder="Password" />
    <button onclick="login()">Login</button>
    <p>No account? <a href="#" onclick="showRegister()">Register</a></p>
  </div>

  <!-- Game Screen -->
  <div id="gameScreen" class="screen">
    <h2>Wingo 1-Minute Game</h2>
    <p>Period: <span id="period">Loading...</span></p>
    <p>Time: <span id="timer">--:--</span></p>

    <div class="colors">
      <button class="btn" onclick="openBet('Green')">Green</button>
      <button class="btn" onclick="openBet('Violet')">Violet</button>
      <button class="btn" onclick="openBet('Red')">Red</button>
    </div>

    <div class="sizes">
      <button class="btn" onclick="openBet('Big')">Big</button>
      <button class="btn" onclick="openBet('Small')">Small</button>
    </div>

    <div class="button-grid">
      ${[0,1,2,3,4,5,6,7,8,9].map(n => `<button class="btn" onclick="openBet(${n})">${n}</button>`).join('')}
    </div>
  </div>

</div>

<!-- Bet Popup -->
<div id="betPopup" class="popup">
  <h3>Place Bet on <span id="selectedBet"></span></h3>
  <input type="number" id="betAmount" placeholder="Enter Amount" />
  <button onclick="placeBet()">Confirm Bet</button>
  <button class="close" onclick="closePopup()">Cancel</button>
</div>

<script>
  let users = JSON.parse(localStorage.getItem("users")) || {};
  let currentUser = localStorage.getItem("loggedIn");

  // Timer + Period logic
  function updatePeriodAndTime() {
    let now = new Date();
    let seconds = now.getUTCSeconds();
    let remaining = 60 - seconds;
    let minutes = now.getUTCHours() * 60 + now.getUTCMinutes();
    let period = `${now.getUTCFullYear()}${(now.getUTCMonth()+1+"").padStart(2,0)}${(now.getUTCDate()+"").padStart(2,0)}1000${(10001 + minutes)}`;
    document.getElementById("period").innerText = period;
    document.getElementById("timer").innerText = `00:${remaining < 10 ? "0"+remaining : remaining}`;
  }

  setInterval(updatePeriodAndTime, 1000);

  function showLogin() {
    document.getElementById("registerScreen").classList.remove("active");
    document.getElementById("loginScreen").classList.add("active");
  }

  function showRegister() {
    document.getElementById("loginScreen").classList.remove("active");
    document.getElementById("registerScreen").classList.add("active");
  }

  function register() {
    let phone = regPhone.value.trim();
    let pass = regPass.value;
    let confirm = regConfirm.value;

    if (!phone || !pass || !confirm) return alert("Fill all fields");
    if (pass !== confirm) return alert("Passwords do not match");
    if (users[phone]) return alert("Phone already registered");

    users[phone] = pass;
    localStorage.setItem("users", JSON.stringify(users));
    localStorage.setItem("loggedIn", phone);
    showGame();
  }

  function login() {
    let phone = loginPhone.value.trim();
    let pass = loginPass.value;

    if (users[phone] && users[phone] === pass) {
      localStorage.setItem("loggedIn", phone);
      showGame();
    } else {
      alert("Invalid credentials");
    }
  }

  function showGame() {
    document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
    document.getElementById("gameScreen").classList.add("active");
  }

  // Auto show screen
  window.onload = function() {
    if (currentUser && users[currentUser]) showGame();
    else document.getElementById("registerScreen").classList.add("active");
  };

  // Betting Popup
  let selected = "";
  function openBet(item) {
    selected = item;
    document.getElementById("selectedBet").innerText = item;
    document.getElementById("betPopup").style.display = "block";
  }

  function placeBet() {
    let amt = betAmount.value.trim();
    if (!amt || amt <= 0) return alert("Enter valid amount");
    alert(`Bet Placed on ${selected} with â‚¹${amt}`);
    closePopup();
  }

  function closePopup() {
    document.getElementById("betPopup").style.display = "none";
    betAmount.value = "";
  }
</script>
</body>
    </html>
