<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Panel - YGWIN</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #121212;
      color: #fff;
      margin: 0;
      padding: 20px;
    }
    h2 {
      margin-top: 30px;
    }
    .card {
      background: #1e1e1e;
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 20px;
    }
    label, input, select, button {
      display: block;
      margin: 10px 0;
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: none;
    }
    button {
      background: #6a0dad;
      color: #fff;
      font-weight: bold;
      cursor: pointer;
    }
    .btn-small {
      padding: 6px 10px;
      font-size: 14px;
      display: inline-block;
      width: auto;
      margin-right: 10px;
    }
    .section {
      margin-bottom: 40px;
    }
  </style>
</head>
<body>
  <h1>Admin Panel - YGWIN</h1>  <div class="section card">
    <h2>Set Manual Result</h2>
    <p id="currentPeriod">Loading...</p>
    <select id="manualResult">
      <option value="">Select Result</option>
      <option value="RED">RED</option>
      <option value="GREEN">GREEN</option>
    </select>
    <button onclick="setManualResult()">Set Result</button>
  </div>  <div class="section card">
    <h2>Deposit Requests</h2>
    <div id="depositList">No requests</div>
  </div>  <div class="section card">
    <h2>Withdrawal Requests</h2>
    <div id="withdrawList">No requests</div>
  </div><script>
function getPeriod(offset = 0) {
  const now = new Date();
  const mins = now.getUTCHours() * 60 + now.getUTCMinutes() + offset;
  return now.getUTCFullYear().toString() +
    String(now.getUTCMonth() + 1).padStart(2, '0') +
    String(now.getUTCDate()).padStart(2, '0') + "1000" + (10001 + mins);
}

function loadPeriod() {
  document.getElementById("currentPeriod").innerText = "Current Period: " + getPeriod();
}

function setManualResult() {
  const val = document.getElementById("manualResult").value;
  if (!val) return alert("Please select result");
  const period = getPeriod(-1);
  const results = JSON.parse(localStorage.getItem("manualResults") || '{}');
  results[period] = val;
  localStorage.setItem("manualResults", JSON.stringify(results));
  alert("Result set for " + period + " = " + val);
}

function renderRequests() {
  const deposits = JSON.parse(localStorage.getItem("depositRequests") || '[]');
  const withdraws = JSON.parse(localStorage.getItem("withdrawRequests") || '[]');
  const users = JSON.parse(localStorage.getItem("users") || '{}');

  const dList = document.getElementById("depositList");
  const wList = document.getElementById("withdrawList");

  dList.innerHTML = '';
  wList.innerHTML = '';

  deposits.forEach((req, i) => {
    const div = document.createElement("div");
    div.innerHTML = `
      <p><b>${req.user}</b> wants to deposit ₹${req.amt} (UTR: ${req.utr})</p>
      <button class="btn-small" onclick="approveDeposit(${i})">Approve</button>
      <button class="btn-small" onclick="rejectDeposit(${i})">Reject</button>
    `;
    dList.appendChild(div);
  });

  withdraws.forEach((req, i) => {
    const div = document.createElement("div");
    div.innerHTML = `
      <p><b>${req.user}</b> wants to withdraw ₹${req.amt} to ${req.upi}</p>
      <button class="btn-small" onclick="approveWithdraw(${i})">Approve</button>
      <button class="btn-small" onclick="rejectWithdraw(${i})">Reject</button>
    `;
    wList.appendChild(div);
  });
}

function approveDeposit(i) {
  const deposits = JSON.parse(localStorage.getItem("depositRequests") || '[]');
  const users = JSON.parse(localStorage.getItem("users") || '{}');
  const req = deposits[i];
  if (users[req.user]) users[req.user].balance += req.amt;
  deposits.splice(i, 1);
  localStorage.setItem("depositRequests", JSON.stringify(deposits));
  localStorage.setItem("users", JSON.stringify(users));
  renderRequests();
}

function rejectDeposit(i) {
  const deposits = JSON.parse(localStorage.getItem("depositRequests") || '[]');
  deposits.splice(i, 1);
  localStorage.setItem("depositRequests", JSON.stringify(deposits));
  renderRequests();
}

function approveWithdraw(i) {
  const withdraws = JSON.parse(localStorage.getItem("withdrawRequests") || '[]');
  const users = JSON.parse(localStorage.getItem("users") || '{}');
  const req = withdraws[i];
  if (users[req.user] && users[req.user].balance >= req.amt) {
    users[req.user].balance -= req.amt;
  }
  withdraws.splice(i, 1);
  localStorage.setItem("withdrawRequests", JSON.stringify(withdraws));
  localStorage.setItem("users", JSON.stringify(users));
  renderRequests();
}

function rejectWithdraw(i) {
  const withdraws = JSON.parse(localStorage.getItem("withdrawRequests") || '[]');
  withdraws.splice(i, 1);
  localStorage.setItem("withdrawRequests", JSON.stringify(withdraws));
  renderRequests();
}

loadPeriod();
renderRequests();
setInterval(loadPeriod, 10000);
</script></body>
        </html>
