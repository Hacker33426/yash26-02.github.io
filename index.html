<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>YGWIN - Color Game</title>
  <style>
    body { font-family: Arial; background: #2b1d1d; color: white; margin: 0; padding: 0; }
    .container { max-width: 400px; margin: auto; padding: 20px; }
    .card { background: #3c2b2b; padding: 20px; border-radius: 12px; margin-bottom: 20px; }
    input, button, select {
      width: 100%; padding: 10px; margin-top: 10px;
      border: none; border-radius: 8px;
    }
    button { background: purple; color: white; font-weight: bold; }
    .green { background: green; }
    .red { background: red; }
    .balance { font-weight: bold; margin-top: 10px; }
    .hide { display: none; }
    .qr-img { width: 100%; border-radius: 10px; margin-top: 10px; }
    nav button { width: 24%; margin-right: 1%; }
  </style>
</head>
<body>

<div class="container">

  <!-- Login Page -->
  <div id="loginCard" class="card">
    <h2>Login</h2>
    <input type="text" id="loginPhone" placeholder="Enter Phone Number">
    <input type="password" id="loginPass" placeholder="Enter Password">
    <button onclick="login()">Login</button>
    <p>Don't have account? <a href="#" onclick="switchTo('registerCard')">Register</a></p>
  </div>

  <!-- Register Page -->
  <div id="registerCard" class="card hide">
    <h2>Register</h2>
    <input type="text" id="regPhone" placeholder="Enter Phone Number">
    <input type="password" id="regPass" placeholder="Enter Password">
    <input type="password" id="regCpass" placeholder="Confirm Password">
    <button onclick="register()">Register</button>
    <p>Already registered? <a href="#" onclick="switchTo('loginCard')">Login</a></p>
  </div>

  <!-- Game Page -->
  <div id="gameCard" class="card hide">
    <h2>Wingo 1 Minute</h2>
    <div class="balance">Balance: ₹<span id="balance">0</span></div>
    <button class="red" onclick="placeBet('Red')">Bet Red</button>
    <button class="green" onclick="placeBet('Green')">Bet Green</button>
    <div style="margin-top: 10px;">
      <input type="number" id="betAmount" placeholder="Enter Amount" value="10">
    </div>
  </div>

  <!-- Deposit Page -->
  <div id="depositCard" class="card hide">
    <h2>Deposit</h2>
    <p>Scan QR & pay to:</p>
    <img src="https://chat.openai.com/c/691ee8e1-7bd6-4a5b-b121-c9a41b08fae1/---/yashqr.jpg" alt="QR" class="qr-img">
    <p><b>UPI ID:</b> yashgolani26@fam</p>
    <input type="text" id="utr" placeholder="Enter 12-digit UTR">
    <button onclick="submitUTR()">Submit for Approval</button>
  </div>

  <!-- Withdraw Page -->
  <div id="withdrawCard" class="card hide">
    <h2>Withdraw</h2>
    <input type="text" id="upiId" placeholder="Enter your UPI ID">
    <input type="number" id="withdrawAmount" placeholder="Enter Amount">
    <button onclick="withdraw()">Request Withdrawal</button>
  </div>

  <!-- Navigation -->
  <nav class="card hide" id="navBar">
    <button onclick="switchTo('gameCard')">Game</button>
    <button onclick="switchTo('depositCard')">Deposit</button>
    <button onclick="switchTo('withdrawCard')">Withdraw</button>
    <button onclick="logout()">Logout</button>
  </nav>
</div>

<script>
  let users = JSON.parse(localStorage.getItem("users")) || {};
  let currentUser = null;

  function switchTo(id) {
    document.querySelectorAll('.card').forEach(el => el.classList.add("hide"));
    document.getElementById(id).classList.remove("hide");
    if (currentUser) document.getElementById("navBar").classList.remove("hide");
  }

  function register() {
    let phone = regPhone.value;
    let pass = regPass.value;
    let cpass = regCpass.value;

    if (users[phone]) return alert("Number already registered!");
    if (pass !== cpass) return alert("Passwords do not match!");

    users[phone] = { password: pass, balance: 0 };
    localStorage.setItem("users", JSON.stringify(users));
    alert("Registered! Please login.");
    switchTo('loginCard');
  }

  function login() {
    let phone = loginPhone.value;
    let pass = loginPass.value;

    if (!users[phone]) return alert("Number not registered.");
    if (users[phone].password !== pass) return alert("Wrong password!");

    currentUser = phone;
    updateBalance();
    switchTo("gameCard");
  }

  function logout() {
    currentUser = null;
    switchTo("loginCard");
    document.getElementById("navBar").classList.add("hide");
  }

  function updateBalance() {
    document.getElementById("balance").innerText = users[currentUser].balance.toFixed(2);
  }

  function placeBet(color) {
    let amt = parseFloat(document.getElementById("betAmount").value);
    if (amt <= 0) return alert("Enter valid amount!");
    if (users[currentUser].balance < amt) return alert("Insufficient balance!");

    users[currentUser].balance -= amt;
    localStorage.setItem("users", JSON.stringify(users));
    updateBalance();
    alert("Bet placed on " + color + " for ₹" + amt);
  }

  function submitUTR() {
    let utr = document.getElementById("utr").value;
    if (utr.length !== 12) return alert("Enter valid 12-digit UTR");
    users[currentUser].balance += 100; // Manual approval simulation
    localStorage.setItem("users", JSON.stringify(users));
    updateBalance();
    alert("₹100 added after UTR approval");
  }

  function withdraw() {
    let amt = parseFloat(document.getElementById("withdrawAmount").value);
    let upi = document.getElementById("upiId").value;

    if (amt <= 0 || upi.length < 5) return alert("Enter valid info");
    if (users[currentUser].balance < amt) return alert("Insufficient balance");

    users[currentUser].balance -= amt;
    localStorage.setItem("users", JSON.stringify(users));
    updateBalance();
    alert("Withdrawal request sent to admin for ₹" + amt);
  }
</script>

</body>
    </html>
